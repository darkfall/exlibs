// ======================================================================================
// File         : StackAllocator.h
// Author       : Wu Jie 
// Last Change  : 08/18/2009 | 00:20:34 AM | Tuesday,August
// Description  : 
// ======================================================================================

// #################################################################################
#ifndef STACKALLOCATOR_H_1250526037
#define STACKALLOCATOR_H_1250526037
// #################################################################################

// #########################
namespace ex { 
// #########################

// ------------------------------------------------------------------
// Desc: 
// ------------------------------------------------------------------

#define EX_MAX_STACK_POOL EX_KB(4)

///////////////////////////////////////////////////////////////////////////////
// class StackAllocator 
// 
// Purpose: 
// 
///////////////////////////////////////////////////////////////////////////////

class EX_LIBS_DLL StackAllocator
{
    ///////////////////////////////////////////////////////////////////////////////
    // singleton decl
    ///////////////////////////////////////////////////////////////////////////////

    EX_DECL_SINGLETON ( StackAllocator );


    ///////////////////////////////////////////////////////////////////////////////
    // member functions 
    ///////////////////////////////////////////////////////////////////////////////

public:
    StackAllocator();
    virtual ~StackAllocator();

    //
    void* alloc( size_t _size );
    void* allocAligned( size_t _size, uint _alignment );
    void  free( size_t _size );

protected:
    char       m_stackPool[EX_MAX_STACK_POOL];
    char*      m_stackPoint;

}; // end class StackAllocator 

// #########################
} // end namespace ex 
// #########################

// #################################################################################
#endif // END STACKALLOCATOR_H_1250526037
// #################################################################################
