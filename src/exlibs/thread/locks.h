// ======================================================================================
// File         : Locks.h
// Author       : Wu Jie 
// Last Change  : 03/01/2010 | 01:39:29 AM | Monday,March
// Description  : 
// ======================================================================================

// #################################################################################
#ifndef LOCKS_H_1267378771
#define LOCKS_H_1267378771
// #################################################################################

///////////////////////////////////////////////////////////////////////////////
// includes
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
// defines
///////////////////////////////////////////////////////////////////////////////

// ######################### 
namespace ex { 
// ######################### 

///////////////////////////////////////////////////////////////////////////////
// class TAutoLock 
// 
// Purpose: 
// 
///////////////////////////////////////////////////////////////////////////////

template < typename LOCK_T >
class TAutoLock
{
    ///////////////////////////////////////////////////////////////////////////////
    // public member functions
    ///////////////////////////////////////////////////////////////////////////////

public:

    // lock the object
    TAutoLock ( LOCK_T* _pLock )
        : m_pLock (_pLock)
    {
        if ( m_pLock )
        {
            m_pLock->Lock ();
        }
    }

    // unlock the object.
    ~TAutoLock()
    {
        if ( m_pLock )
        {
            m_pLock->Unlock ();
        }
    }

    ///////////////////////////////////////////////////////////////////////////////
    // private member data
    ///////////////////////////////////////////////////////////////////////////////

private:

    LOCK_T* m_pLock;

}; // end class TAutoLock


// ######################### 
} // end namespace ex 
// ######################### 


// #################################################################################
#endif // END LOCKS_H_1267378771
// #################################################################################


