// ======================================================================================
// File         : wrap_core.cpp
// Author       : Wu Jie 
// Last Change  : 08/29/2010 | 22:44:15 PM | Sunday,August
// Description  : 
// ======================================================================================

///////////////////////////////////////////////////////////////////////////////
// includes
///////////////////////////////////////////////////////////////////////////////

#include "exlibs.h"
#include "lua_inc.h"

#if EX_USE_LUA

// ######################### 
namespace ex { 
// ######################### 

// ######################### 
namespace lua { 
// ######################### 

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

int _log ( lua_State* _l ) {
    const char* msg = luaL_checkstring ( _l, 1 );
    ex_log (msg);
    return 0;
}

///////////////////////////////////////////////////////////////////////////////
// defines
///////////////////////////////////////////////////////////////////////////////

static const luaL_Reg functions[] = {
    { "log", _log },
    { 0, 0 }
};

// ------------------------------------------------------------------ 
// Desc: 
// ------------------------------------------------------------------ 

EX_LIBS_DLL int luaopen_core ( lua_State* _l )
{
    // we create global ex table if it not exists.
    lua::global_module ( lua::state(), "ex" );
    luaL_register( _l, 0, functions );
    return 0;
}

// ######################### 
} // end namespace lua 
// ######################### 

// ######################### 
} // end namespace ex 
// ######################### 

#endif
